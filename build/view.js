jQuery(document).ready((function(a){function t(a,t){a.html(`<p class="block-message">${t}</p>`)}a(".wp-block-ivan-hrk-api-based-addon").each((function(){const n=a(this),d=n.data("visible-columns")?.split(",")||[];!function(n,d){a.ajax({url:IvanApiBasedAddon.ajax_url,method:"POST",data:{action:"ivan_api_based_fetch_data",nonce:IvanApiBasedAddon.nonce,visible_columns:d},success:function(d){!function(a){return a.success&&a?.data?.data?.headers&&a?.data?.data?.rows}(d)?t(n,"No data available."):function(t,n){const d=a("<table>").addClass("api-data-table"),e=a("<thead>"),o=a("<tr>");n.headers.forEach((t=>{o.append(a("<th>").text(t))})),e.append(o),d.append(e);const c=a("<tbody>");n.rows.forEach((t=>{const n=a("<tr>");Object.values(t).forEach((t=>{n.append(a("<td>").text(t||"-"))})),c.append(n)})),d.append(c),t.html(d)}(n,d.data.data)},error:function(){t(n,"Failed to load data.")}})}(n,d)}))}));