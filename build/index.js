(()=>{"use strict";var e,a={771:()=>{const e=window.wp.blocks,a=window.wp.i18n,i=window.wp.blockEditor,s=window.wp.element,n=window.wp.components,t=window.ReactJSXRuntime,r=JSON.parse('{"UU":"ivan-hrk/api-based-addon"}');(0,e.registerBlockType)(r.UU,{edit:function({attributes:e,setAttributes:r}){const l=(0,i.useBlockProps)(),{columnsVisibility:d}=e,[o,c]=(0,s.useState)([]),[h,b]=(0,s.useState)(!0),[p,v]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{try{b(!0);const e=await wp.ajax.post("ivan_api_based_fetch_data",{nonce:IvanApiBasedAddon.nonce});c(e||{data:{headers:[],rows:[]}}),b(!1)}catch(e){v((0,a.__)("Failed to fetch data.","ivan-hrk-api-based-addon")),b(!1)}})()}),[]),(0,s.useEffect)((()=>{if(o?.data?.headers?.length&&o?.data?.rows?.length){const e=Object.keys(o.data.rows[0]),a=o.data.headers.map(((a,i)=>{var s;return{id:e[i]||`col-${i}`,label:a,visible:!d||null===(s=d.find((a=>a.id===e[i]))?.visible)||void 0===s||s}}));r({columnsVisibility:a})}}),[o,r]),(0,t.jsxs)("div",{...l,children:[(0,t.jsx)(i.InspectorControls,{children:(0,t.jsx)(n.PanelBody,{title:(0,a.__)("Table Settings","ivan-hrk-api-based-addon"),children:d?.map((e=>(0,t.jsx)(n.ToggleControl,{label:e.label,checked:e.visible,onChange:()=>(e=>{const a=d.map((a=>a.id===e?{...a,visible:!a.visible}:a));r({columnsVisibility:a})})(e.id)},e.id)))})}),h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.ProgressBar,{}),(0,t.jsx)("p",{children:(0,a.__)("Loadingâ€¦","ivan-hrk-api-based-addon")})]}),p&&(0,t.jsx)("p",{className:"error",children:p}),!h&&!p&&(0,t.jsx)(t.Fragment,{children:d?.every((e=>!e.visible))?(0,t.jsx)("p",{className:"no-columns-message",children:(0,a.__)("All columns are hidden. Please enable at least one column to display the table.","ivan-hrk-api-based-addon")}):(0,t.jsxs)("table",{className:"api-data-table",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:d?.filter((e=>e.visible)).map((e=>(0,t.jsx)("th",{children:e.label},e.id)))})}),(0,t.jsx)("tbody",{children:o.data?.rows?.map(((e,a)=>(0,t.jsx)("tr",{children:d?.filter((e=>e.visible)).map((a=>(0,t.jsx)("td",{children:e[a.id]||"-"},a.id)))},a)))})]})})]})},save:function({attributes:e}){const{columnsVisibility:a}=e,s=a?.filter((e=>e.visible)).map((e=>e.id)).join(",");return(0,t.jsx)("div",{...i.useBlockProps.save(),"data-visible-columns":s})}})}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var t=i[e]={exports:{}};return a[e](t,t.exports,s),t.exports}s.m=a,e=[],s.O=(a,i,n,t)=>{if(!i){var r=1/0;for(c=0;c<e.length;c++){for(var[i,n,t]=e[c],l=!0,d=0;d<i.length;d++)(!1&t||r>=t)&&Object.keys(s.O).every((e=>s.O[e](i[d])))?i.splice(d--,1):(l=!1,t<r&&(r=t));if(l){e.splice(c--,1);var o=n();void 0!==o&&(a=o)}}return a}t=t||0;for(var c=e.length;c>0&&e[c-1][2]>t;c--)e[c]=e[c-1];e[c]=[i,n,t]},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};s.O.j=a=>0===e[a];var a=(a,i)=>{var n,t,[r,l,d]=i,o=0;if(r.some((a=>0!==e[a]))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(d)var c=d(s)}for(a&&a(i);o<r.length;o++)t=r[o],s.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return s.O(c)},i=globalThis.webpackChunkivan_hrk_api_based_addon=globalThis.webpackChunkivan_hrk_api_based_addon||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))})();var n=s.O(void 0,[350],(()=>s(771)));n=s.O(n)})();