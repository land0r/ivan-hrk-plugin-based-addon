(()=>{"use strict";var e,a={771:()=>{const e=window.wp.blocks,a=window.wp.i18n,i=window.wp.blockEditor,s=window.wp.element,n=window.wp.components,r=window.ReactJSXRuntime,t=JSON.parse('{"UU":"ivan-hrk/api-based-addon"}');(0,e.registerBlockType)(t.UU,{edit:function({attributes:e,setAttributes:t}){const l=(0,i.useBlockProps)(),{columnsVisibility:d}=e,[o,c]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[b,v]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{try{p(!0);const e=await wp.ajax.post("ivan_api_based_fetch_data",{nonce:IvanApiBasedAddon.nonce});c(e||{data:{headers:[],rows:[]}}),p(!1)}catch(e){v((0,a.__)("Failed to fetch data.","ivan-hrk-api-based-addon")),p(!1)}})()}),[]),(0,s.useEffect)((()=>{if(o?.data?.headers?.length&&o?.data?.rows?.length){const e=Object.keys(o.data.rows[0]),a=o.data.headers.map(((a,i)=>{var s;return{id:e[i]||`col-${i}`,label:a,visible:!d||null===(s=d.find((a=>a.id===e[i]))?.visible)||void 0===s||s}}));t({columnsVisibility:a})}}),[o,t]),(0,r.jsxs)("div",{...l,children:[(0,r.jsx)(i.InspectorControls,{children:(0,r.jsx)(n.PanelBody,{title:(0,a.__)("Table Settings","ivan-hrk-api-based-addon"),children:d?.map((e=>(0,r.jsx)(n.ToggleControl,{label:e.label,checked:e.visible,onChange:()=>(e=>{const a=d.map((a=>a.id===e?{...a,visible:!a.visible}:a));t({columnsVisibility:a})})(e.id)},e.id)))})}),h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.ProgressBar,{}),(0,r.jsx)("p",{children:(0,a.__)("Loadingâ€¦","ivan-hrk-api-based-addon")})]}),b&&(0,r.jsx)("p",{className:"error",children:b}),!h&&!b&&(0,r.jsx)(r.Fragment,{children:d?.every((e=>!e.visible))?(0,r.jsx)("p",{className:"no-columns-message",children:(0,a.__)("All columns are hidden. Please enable at least one column to display the table.","ivan-hrk-api-based-addon")}):(0,r.jsxs)("table",{className:"api-data-table",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:d?.filter((e=>e.visible)).map((e=>(0,r.jsx)("th",{children:e.label},e.id)))})}),(0,r.jsx)("tbody",{children:o.data?.rows?.map(((e,a)=>(0,r.jsx)("tr",{children:d?.filter((e=>e.visible)).map((a=>(0,r.jsx)("td",{children:e[a.id]||"-"},a.id)))},a)))})]})})]})},save:function(){return(0,r.jsx)("p",{...i.useBlockProps.save(),children:"Hello world!"})}})}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}};return a[e](r,r.exports,s),r.exports}s.m=a,e=[],s.O=(a,i,n,r)=>{if(!i){var t=1/0;for(c=0;c<e.length;c++){for(var[i,n,r]=e[c],l=!0,d=0;d<i.length;d++)(!1&r||t>=r)&&Object.keys(s.O).every((e=>s.O[e](i[d])))?i.splice(d--,1):(l=!1,r<t&&(t=r));if(l){e.splice(c--,1);var o=n();void 0!==o&&(a=o)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,n,r]},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};s.O.j=a=>0===e[a];var a=(a,i)=>{var n,r,[t,l,d]=i,o=0;if(t.some((a=>0!==e[a]))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(d)var c=d(s)}for(a&&a(i);o<t.length;o++)r=t[o],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(c)},i=globalThis.webpackChunkivan_hrk_api_based_addon=globalThis.webpackChunkivan_hrk_api_based_addon||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))})();var n=s.O(void 0,[350],(()=>s(771)));n=s.O(n)})();